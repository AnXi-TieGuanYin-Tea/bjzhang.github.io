

各种镜像打包方式总结

实际工作中可能涉及到在特定环境部署物理机或虚拟机，可能希望系统一键部署后直接可用。一般有两类思路，一个是做一个ghost镜像，直接写入目标系统，系统启动后直接可以使用。第二个是启动或安装一个默认系统，使用自动化部署工具配置环境。更复杂的情况是两者的结合。

第二种方法包括ansible, fabric等方法。本文只讨论第一种方法。第二类方法后续。

Linux发行版一键安装方式有很多种，可以分为预先安装和预先写好配置文件一键安装两种方式。

通过配置文件一键安装通常和发行版联系比较紧密，例如suse有autoyast，redhat有kickstart。todo链接。这类方法以一个管理员手工安装的脚本为基础，进一步修改做成。由于每次重新安装时间较长。适合于需要给少量几台机器部署。

前一种方法和在云化场景中选择自定义镜像类似。实际应用中，不管物理机还是虚拟机还是云化场景的镜像定制，都适合。

预先安装需要制作一个磁盘镜像，一键部署时选择指定的磁盘直接写入并设置bootloader之后即可使用。有suse的kiwi，redhat的virt-builder, virt-p2v里面用的那个, terraform.

其中只有kiwi支持从物理机，虚拟机到云化场景的镜像构建和部署。terraform支持跨操作系统的虚拟机，尤其适合个人用户。

网上中文材料基本说的都是kiwi不是最新的kiwi-ng，而且缺乏定制化细节。

kiwi超快上手
--------------

kiwi定制化
----------

kiwi免安装选择
--------------

kiwi调试
--------

kiwi部署
--------
### 物理机
### 虚拟机
### 云

kiwi官方文档
------------
kiwi quick start
google group
YaST 映像创建程序是 KIWI 映像工具的图形界面
<https://www.suse.com/zh-cn/documentation/sles-12/book_sle_deployment/data/cha_imgcreator.html>

vagrant跨平台部署
-----------------


